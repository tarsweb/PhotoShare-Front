import{C as d,o as g,c as y,w as u,b as l,Q as C,f as b,g as S,h as F,p as U,R,I as T,l as I,J as $,y as z,S as D,z as v,K as L,n as N,T as q,U as E,m as j,N as A,s as M,L as P,e as H,F as O,d as J,W as K,i as Q}from"./index-BLdPmo0X.js";import{c as W,g as G}from"./apiPhoto-Dsc-_Hpb.js";import{V as X,_ as Y}from"./VFileInput-rUwfF0ag.js";import{h as k,V,a as Z,i as ee,j as ae,M as te,k as le}from"./VGrid-2AqWVivO.js";import{V as oe}from"./VSheet-BPPxVze8.js";import{a as se}from"./index-C07GXgUv.js";import{V as ne,a as w}from"./VTextField-Bxw26yWj.js";import{V as B}from"./VContainer-_T5mVdcw.js";import{V as ie}from"./forwardRefs-DTIWPoyU.js";import"./VPagination-D52iBSlf.js";import"./VRating-BL9mVd_E.js";import"./VSpacer-q3eTX0uv.js";const re=b("h1",null,"Add New Photo",-1),ue={class:"d-flex flex-column justify-center my-4"},de=b("div",{class:"d-flex align-center justify-center fill-height"},null,-1),ce={__name:"NewPhotoForm",emits:["close"],setup(e,{emit:h}){const m=h,c=d(!1),a=d({title:"",description:"",file:null,tags:""}),o=d(!1);d([]);const f=d(null),n=t=>{const s=new FileReader;s.onload=i=>{f.value=i.target.result},s.readAsDataURL(t)},p=t=>{if(!t){f.value=null;return}n(t)},x=async t=>{c.value&&(o.value=!0,W(_()).then(s=>{t.target.reset(),m("close")}).catch(s=>{}).finally(()=>{o.value=!1}))},_=()=>{const t=new FormData;return t.append("title",a.value.title),t.append("description",a.value.description),t.append("file",a.value.file),a.value.tags.length&&t.append("tags",a.value.tags),t},r={title:[t=>!!t||"Title is required"],description:[t=>!!t||"Description is required"],file:[t=>!!t.length||"File is required"]};return(t,s)=>(g(),y(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[o.value?F("",!0):(g(),y(oe,{key:0,class:"align-center",width:"500"},{default:u(()=>[l(V,{icon:"mdi-close",onClick:s[0]||(s[0]=i=>t.$emit("close")),position:"absolute top-0 right-0",variant:"text"}),re,l(se,{flat:"",class:"mx-auto px-6 py-8",width:"500"},{default:u(()=>[l(ne,{modelValue:c.value,"onUpdate:modelValue":s[5]||(s[5]=i=>c.value=i),onSubmit:C(x,["prevent"])},{default:u(()=>[l(w,{modelValue:a.value.title,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value.title=i),readonly:o.value,label:"Title",rules:r.title,placeholder:"Enter title",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(w,{modelValue:a.value.description,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value.description=i),readonly:o.value,rules:r.description,placeholder:"Enter description",label:"Description","multi-line":"",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),b("div",ue,[l(Z,{src:f.value,width:"50px",height:"50px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},{placeholder:u(()=>[de]),_:1},8,["src"])]),l(X,{modelValue:a.value.file,"onUpdate:modelValue":[s[3]||(s[3]=i=>a.value.file=i),p],readonly:o.value,rules:r.file,label:"File photo",clearable:!o.value,"prepend-icon":"mdi-camera",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(w,{modelValue:a.value.tags,"onUpdate:modelValue":s[4]||(s[4]=i=>a.value.tags=i),readonly:o.value,label:"Tags",placeholder:"Enter tags",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","readonly","clearable"]),l(V,{disabled:!c.value,loading:o.value,block:"",color:"success",size:"large",type:"submit","prepend-icon":"mdi-upload"},{default:u(()=>[S(" Upload ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))]),_:1})]),_:1}))}},me=U({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,location:{type:String,default:"bottom end"},offset:Boolean,modelValue:{type:Boolean,default:!0},...R(ee({active:!0}),["location"]),...T(),...ae({transition:"fab-transition"})},"VFab"),fe=I()({name:"VFab",props:me(),emits:{"update:modelValue":e=>!0},setup(e,h){let{slots:m}=h;const c=$(e,"modelValue"),a=z(56),o=d(),{resizeRef:f}=D(r=>{r.length&&(a.value=r[0].target.clientHeight)}),n=v(()=>e.app||e.absolute),p=v(()=>n.value?e.location.split(" ").shift():!1),x=v(()=>n.value?e.location.split(" ")[1]??"end":!1);L(()=>e.app,()=>{const r=A({id:e.name,order:v(()=>parseInt(e.order,10)),position:p,layoutSize:v(()=>e.layout?a.value+24:0),elementSize:v(()=>a.value+24),active:v(()=>e.app&&c.value),absolute:M(e,"absolute")});P(()=>{o.value=r.layoutItemStyles.value})});const _=d();return N(()=>{const r=V.filterProps(e);return l("div",{ref:_,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${p.value}`]:n.value,[`v-fab--${x.value}`]:n.value},e.class],style:[e.app?{...o.value}:{height:"inherit",width:void 0},e.style]},[l("div",{class:"v-fab__container"},[l(te,{appear:e.appear,transition:e.transition},{default:()=>[q(l(V,j({ref:f},r,{active:void 0,location:void 0}),m),[[E,e.active]])]})])])}),{}}}),pe=b("h1",null,"Photos",-1),Be={__name:"Home",setup(e){const{isAuth:h}=Q(),m=d(!1),c=d([]),a=d(!1),o=async()=>{const f=await G();c.value=f};return P(async()=>{m.value=!0,await o(),m.value=!1}),(f,n)=>(g(),H(O,null,[l(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[pe,m.value?(g(),y(le,{key:1,indeterminate:"",size:88,width:9})):(g(),y(Y,{key:0,photos:c.value,isLoading:m.value},null,8,["photos","isLoading"])),J(h)?(g(),y(K,{key:2,to:"#app"},[l(fe,{extended:"","prepend-icon":"mdi-plus",text:"Add photo",variant:"tonal",color:"success",app:"",style:{position:"sticky",bottom:"20px",right:"20px"},onClick:n[0]||(n[0]=p=>a.value=!0)})])):F("",!0)]),_:1})]),_:1}),l(ie,{modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=p=>a.value=p),scrim:"black",style:{"overflow-y":"auto !important"},class:"d-flex justify-center align-center"},{default:u(()=>[l(ce,{onClose:n[1]||(n[1]=p=>a.value=!1)})]),_:1},8,["modelValue"])],64))}};export{Be as default};
