import{C as d,o as h,c as V,w as u,b as l,Q as B,f as b,g as C,p as S,R as U,I as R,l as T,J as I,y as $,S as z,z as v,K as D,n as L,T as N,U as q,m as E,N as j,s as A,L as F,e as M,F as H,d as O,W as J,h as K,i as Q}from"./index-CnkfXj-f.js";import{c as W,g as G}from"./apiPhoto-rBIvv27k.js";import{V as X,_ as Y}from"./VFileInput-DkuJxuW-.js";import{h as P,V as y,a as Z,i as ee,j as ae,M as te,k as le}from"./VGrid-CrWiUoSu.js";import{V as oe}from"./VSheet-BUKnYUI8.js";import{a as se}from"./index-C5cSfjXQ.js";import{V as ne,a as w}from"./VTextField-CKgKI1u6.js";import{V as k}from"./VContainer-D711r6Cm.js";import{V as ie}from"./forwardRefs-Ca3nZCua.js";import"./VPagination-DUbIvcGK.js";import"./VRating-7_sD3c9l.js";import"./VSpacer-CdExTvQn.js";const re=b("h1",null,"Add New Photo",-1),ue={class:"d-flex flex-column justify-center my-4"},de=b("div",{class:"d-flex align-center justify-center fill-height"},null,-1),ce={__name:"NewPhotoForm",emits:["close"],setup(e,{emit:g}){const m=g,c=d(!1),a=d({title:"",description:"",file:null,tags:[]}),o=d(!1);d([]);const f=d(null),n=t=>{const s=new FileReader;s.onload=i=>{f.value=i.target.result},s.readAsDataURL(t)},p=t=>{if(!t){f.value=null;return}n(t)},x=async t=>{c.value&&(o.value=!0,W(_()).then(s=>{t.target.reset(),m("close")}).catch(s=>{}).finally(()=>{o.value=!1}))},_=()=>{const t=new FormData;return t.append("title",a.value.title),t.append("description",a.value.description),t.append("file",a.value.file),a.value.tags.length&&t.append("tags",a.value.tags),t},r={title:[t=>!!t||"Title is required"],description:[t=>!!t||"Description is required"],file:[t=>!!t.length||"File is required"]};return(t,s)=>(h(),V(k,{class:"fill-height"},{default:u(()=>[l(P,{class:"align-center text-center fill-height"},{default:u(()=>[l(oe,{class:"align-center",width:"500"},{default:u(()=>[l(y,{icon:"mdi-close",onClick:s[0]||(s[0]=i=>t.$emit("close")),position:"absolute top-0 right-0",variant:"text"}),re,l(se,{flat:"",class:"mx-auto px-6 py-8",width:"500"},{default:u(()=>[l(ne,{modelValue:c.value,"onUpdate:modelValue":s[5]||(s[5]=i=>c.value=i),onSubmit:B(x,["prevent"])},{default:u(()=>[l(w,{modelValue:a.value.title,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value.title=i),readonly:o.value,label:"Title",rules:r.title,placeholder:"Enter title",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(w,{modelValue:a.value.description,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value.description=i),readonly:o.value,rules:r.description,placeholder:"Enter description",label:"Description","multi-line":"",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),b("div",ue,[l(Z,{src:f.value,width:"50px",height:"50px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},{placeholder:u(()=>[de]),_:1},8,["src"])]),l(X,{modelValue:a.value.file,"onUpdate:modelValue":[s[3]||(s[3]=i=>a.value.file=i),p],readonly:o.value,rules:r.file,label:"File photo",clearable:!o.value,"prepend-icon":"mdi-camera",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(w,{modelValue:a.value.tags,"onUpdate:modelValue":s[4]||(s[4]=i=>a.value.tags=i),readonly:o.value,label:"Tags",placeholder:"Enter tags",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","readonly","clearable"]),l(y,{disabled:!c.value,loading:o.value,block:"",color:"success",size:"large",type:"submit","prepend-icon":"mdi-upload"},{default:u(()=>[C(" Upload ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}},me=S({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,location:{type:String,default:"bottom end"},offset:Boolean,modelValue:{type:Boolean,default:!0},...U(ee({active:!0}),["location"]),...R(),...ae({transition:"fab-transition"})},"VFab"),fe=T()({name:"VFab",props:me(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:m}=g;const c=I(e,"modelValue"),a=$(56),o=d(),{resizeRef:f}=z(r=>{r.length&&(a.value=r[0].target.clientHeight)}),n=v(()=>e.app||e.absolute),p=v(()=>n.value?e.location.split(" ").shift():!1),x=v(()=>n.value?e.location.split(" ")[1]??"end":!1);D(()=>e.app,()=>{const r=j({id:e.name,order:v(()=>parseInt(e.order,10)),position:p,layoutSize:v(()=>e.layout?a.value+24:0),elementSize:v(()=>a.value+24),active:v(()=>e.app&&c.value),absolute:A(e,"absolute")});F(()=>{o.value=r.layoutItemStyles.value})});const _=d();return L(()=>{const r=y.filterProps(e);return l("div",{ref:_,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${p.value}`]:n.value,[`v-fab--${x.value}`]:n.value},e.class],style:[e.app?{...o.value}:{height:"inherit",width:void 0},e.style]},[l("div",{class:"v-fab__container"},[l(te,{appear:e.appear,transition:e.transition},{default:()=>[N(l(y,E({ref:f},r,{active:void 0,location:void 0}),m),[[q,e.active]])]})])])}),{}}}),pe=b("h1",null,"Photos",-1),Be={__name:"Home",setup(e){const{isAuth:g}=Q(),m=d(!1),c=d([]),a=d(!1),o=async()=>{const f=await G();c.value=f};return F(async()=>{m.value=!0,await o(),m.value=!1}),(f,n)=>(h(),M(H,null,[l(k,{class:"fill-height"},{default:u(()=>[l(P,{class:"align-center text-center fill-height"},{default:u(()=>[pe,m.value?(h(),V(le,{key:1,indeterminate:"",size:88,width:9})):(h(),V(Y,{key:0,photos:c.value,isLoading:m.value},null,8,["photos","isLoading"])),O(g)?(h(),V(J,{key:2,to:"#app"},[l(fe,{extended:"","prepend-icon":"mdi-plus",text:"Add photo",variant:"tonal",color:"success",app:"",style:{position:"sticky",bottom:"20px",right:"20px"},onClick:n[0]||(n[0]=p=>a.value=!0)})])):K("",!0)]),_:1})]),_:1}),l(ie,{modelValue:a.value,"onUpdate:modelValue":n[2]||(n[2]=p=>a.value=p),scrim:"black",style:{"overflow-y":"auto !important"},class:"d-flex justify-center align-center"},{default:u(()=>[l(ce,{onClose:n[1]||(n[1]=p=>{a.value=!1,o()})})]),_:1},8,["modelValue"])],64))}};export{Be as default};
