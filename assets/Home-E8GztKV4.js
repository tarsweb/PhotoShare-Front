import{C as d,o as h,c as F,w as u,b as l,Q as C,f as b,g as S,h as w,p as U,R,I as T,l as I,J as $,y as D,S as L,z as v,K as z,n as N,T as q,U as E,m as A,N as M,s as H,L as P,e as j,F as O,d as J,W as K,i as Q}from"./index-DUEpLbjW.js";import{c as W,g as G}from"./apiPhoto-qVXcN-rz.js";import{V as X,_ as Y}from"./VFileInput-CDCj3NcZ.js";import{V as k}from"./position-D3ASe83_.js";import{V as Z}from"./VSheet-CysU1idu.js";import{V,a as ee,m as ae,c as te,M as le}from"./VGrid-mLOjZRgl.js";import{a as oe}from"./index-CWu8u-_y.js";import{V as ne,a as _}from"./VTextField-DevY-Mv1.js";import{V as B}from"./VContainer-BTnN6Ko8.js";import{V as se}from"./forwardRefs-C2CKELp2.js";import"./VPagination-BHZPu3vE.js";import"./VSpacer-DxUQ8A_A.js";const ie=b("h1",null,"Add New Photo",-1),re={class:"d-flex flex-column justify-center my-4"},ue=b("div",{class:"d-flex align-center justify-center fill-height"},null,-1),de={__name:"NewPhotoForm",emits:["close"],setup(e,{emit:g}){const p=g,c=d(!1),a=d({title:"",description:"",file:null,tags:""}),o=d(!1);d([]);const m=d(null),s=t=>{const n=new FileReader;n.onload=i=>{m.value=i.target.result},n.readAsDataURL(t)},f=t=>{if(!t){m.value=null;return}s(t)},y=async t=>{c.value&&(o.value=!0,W(x()).then(n=>{t.target.reset(),p("close")}).catch(n=>{}).finally(()=>{o.value=!1}))},x=()=>{const t=new FormData;return t.append("title",a.value.title),t.append("description",a.value.description),t.append("file",a.value.file),a.value.tags.length&&t.append("tags",a.value.tags),t},r={title:[t=>!!t||"Title is required"],description:[t=>!!t||"Description is required"],file:[t=>!!t.length||"File is required"]};return(t,n)=>(h(),F(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[o.value?w("",!0):(h(),F(Z,{key:0,class:"align-center",width:"500"},{default:u(()=>[l(V,{icon:"mdi-close",onClick:n[0]||(n[0]=i=>t.$emit("close")),position:"absolute top-0 right-0",variant:"text"}),ie,l(oe,{flat:"",class:"mx-auto px-6 py-8",width:"500"},{default:u(()=>[l(ne,{modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=i=>c.value=i),onSubmit:C(y,["prevent"])},{default:u(()=>[l(_,{modelValue:a.value.title,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.title=i),readonly:o.value,label:"Title",rules:r.title,placeholder:"Enter title",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(_,{modelValue:a.value.description,"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.description=i),readonly:o.value,rules:r.description,placeholder:"Enter description",label:"Description","multi-line":"",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),b("div",re,[l(ee,{src:m.value,width:"50px",height:"50px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},{placeholder:u(()=>[ue]),_:1},8,["src"])]),l(X,{modelValue:a.value.file,"onUpdate:modelValue":[n[3]||(n[3]=i=>a.value.file=i),f],readonly:o.value,rules:r.file,label:"File photo",clearable:!o.value,"prepend-icon":"mdi-camera",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(_,{modelValue:a.value.tags,"onUpdate:modelValue":n[4]||(n[4]=i=>a.value.tags=i),readonly:o.value,label:"Tags",placeholder:"Enter tags",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","readonly","clearable"]),l(V,{disabled:!c.value,loading:o.value,block:"",color:"success",size:"large",type:"submit","prepend-icon":"mdi-upload"},{default:u(()=>[S(" Upload ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))]),_:1})]),_:1}))}},ce=U({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,location:{type:String,default:"bottom end"},offset:Boolean,modelValue:{type:Boolean,default:!0},...R(ae({active:!0}),["location"]),...T(),...te({transition:"fab-transition"})},"VFab"),me=I()({name:"VFab",props:ce(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:p}=g;const c=$(e,"modelValue"),a=D(56),o=d(),{resizeRef:m}=L(r=>{r.length&&(a.value=r[0].target.clientHeight)}),s=v(()=>e.app||e.absolute),f=v(()=>s.value?e.location.split(" ").shift():!1),y=v(()=>s.value?e.location.split(" ")[1]??"end":!1);z(()=>e.app,()=>{const r=M({id:e.name,order:v(()=>parseInt(e.order,10)),position:f,layoutSize:v(()=>e.layout?a.value+24:0),elementSize:v(()=>a.value+24),active:v(()=>e.app&&c.value),absolute:H(e,"absolute")});P(()=>{o.value=r.layoutItemStyles.value})});const x=d();return N(()=>{const r=V.filterProps(e);return l("div",{ref:x,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${f.value}`]:s.value,[`v-fab--${y.value}`]:s.value},e.class],style:[e.app?{...o.value}:{height:"inherit",width:void 0},e.style]},[l("div",{class:"v-fab__container"},[l(le,{appear:e.appear,transition:e.transition},{default:()=>[q(l(V,A({ref:m},r,{active:void 0,location:void 0}),p),[[E,e.active]])]})])])}),{}}}),fe=b("h1",null,"Photos",-1),ke={__name:"Home",setup(e){const{isAuth:g}=Q(),p=d(!1),c=d([]),a=d(!1),o=async()=>{const m=await G();c.value=m};return P(async()=>{p.value=!0,console.log("Home",a.value),o(),p.value=!1}),(m,s)=>(h(),j(O,null,[l(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[fe,l(Y,{photos:c.value,isLoading:p.value},null,8,["photos","isLoading"]),J(g)?(h(),F(K,{key:0,to:"#app"},[l(me,{extended:"","prepend-icon":"mdi-plus",text:"Add photo",variant:"tonal",color:"success",app:"",style:{position:"sticky",bottom:"20px",right:"20px"},onClick:s[0]||(s[0]=f=>a.value=!0)})])):w("",!0)]),_:1})]),_:1}),l(se,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=f=>a.value=f),scrim:"black",style:{"overflow-y":"auto !important"}},{default:u(()=>[l(de,{onClose:s[1]||(s[1]=f=>a.value=!1)})]),_:1},8,["modelValue"])],64))}};export{ke as default};
