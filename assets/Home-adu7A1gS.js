import{C as d,o as h,c as F,w as u,b as l,Q as C,f as b,g as S,h as P,p as U,R,I,l as T,J as $,y as D,S as L,z as p,K as z,n as N,T as q,U as E,m as A,N as M,s as H,L as w,e as j,F as O,d as J,i as K}from"./index-DpOoD5N3.js";import{c as Q,g as G}from"./apiPhoto-T4t500pA.js";import{V as W,_ as X}from"./VFileInput-Da5fGC88.js";import{V as k}from"./position-azBszT6j.js";import{V as Y}from"./VSheet-DdI8ijo_.js";import{V,a as Z,m as ee,c as ae,M as te}from"./VGrid-DqjEqCRg.js";import{a as le}from"./index-7M7HIt0c.js";import{V as oe,a as _}from"./VTextField-BuZWM7FU.js";import{V as B}from"./VContainer-PN9emtq_.js";import{V as ne}from"./forwardRefs-CmMfuqbl.js";import"./VPagination-D_IZ_OUN.js";import"./VSpacer-DjXgOUI8.js";const se=b("h1",null,"Add New Photo",-1),ie={class:"d-flex flex-column justify-center my-4"},re=b("div",{class:"d-flex align-center justify-center fill-height"},null,-1),ue={__name:"NewPhotoForm",emits:["close"],setup(e,{emit:g}){const v=g,c=d(!1),a=d({title:"",description:"",file:null,tags:""}),o=d(!1);d([]);const m=d(null),s=t=>{const n=new FileReader;n.onload=i=>{m.value=i.target.result},n.readAsDataURL(t)},f=t=>{if(!t){m.value=null;return}s(t)},y=async t=>{c.value&&(o.value=!0,Q(x()).then(n=>{t.target.reset(),v("close")}).catch(n=>{}).finally(()=>{o.value=!1}))},x=()=>{const t=new FormData;return t.append("title",a.value.title),t.append("description",a.value.description),t.append("file",a.value.file),a.value.tags.length&&t.append("tags",a.value.tags),t},r={title:[t=>!!t||"Title is required"],description:[t=>!!t||"Description is required"],file:[t=>!!t.length||"File is required"]};return(t,n)=>(h(),F(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[o.value?P("",!0):(h(),F(Y,{key:0,class:"align-center",width:"500"},{default:u(()=>[l(V,{icon:"mdi-close",onClick:n[0]||(n[0]=i=>t.$emit("close")),position:"absolute top-0 right-0",variant:"text"}),se,l(le,{flat:"",class:"mx-auto px-6 py-8",width:"500"},{default:u(()=>[l(oe,{modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=i=>c.value=i),onSubmit:C(y,["prevent"])},{default:u(()=>[l(_,{modelValue:a.value.title,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.title=i),readonly:o.value,label:"Title",rules:r.title,placeholder:"Enter title",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(_,{modelValue:a.value.description,"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.description=i),readonly:o.value,rules:r.description,placeholder:"Enter description",label:"Description","multi-line":"",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-pencil-outline",required:""},null,8,["modelValue","readonly","rules","clearable"]),b("div",ie,[l(Z,{src:m.value,width:"50px",height:"50px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},{placeholder:u(()=>[re]),_:1},8,["src"])]),l(W,{modelValue:a.value.file,"onUpdate:modelValue":[n[3]||(n[3]=i=>a.value.file=i),f],readonly:o.value,rules:r.file,label:"File photo",clearable:!o.value,"prepend-icon":"mdi-camera",required:""},null,8,["modelValue","readonly","rules","clearable"]),l(_,{modelValue:a.value.tags,"onUpdate:modelValue":n[4]||(n[4]=i=>a.value.tags=i),readonly:o.value,label:"Tags",placeholder:"Enter tags",clearable:!o.value,variant:"outlined","prepend-inner-icon":"mdi-tag"},null,8,["modelValue","readonly","clearable"]),l(V,{disabled:!c.value,loading:o.value,block:"",color:"success",size:"large",type:"submit","prepend-icon":"mdi-upload"},{default:u(()=>[S(" Upload ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))]),_:1})]),_:1}))}},de=U({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,location:{type:String,default:"bottom end"},offset:Boolean,modelValue:{type:Boolean,default:!0},...R(ee({active:!0}),["location"]),...I(),...ae({transition:"fab-transition"})},"VFab"),ce=T()({name:"VFab",props:de(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:v}=g;const c=$(e,"modelValue"),a=D(56),o=d(),{resizeRef:m}=L(r=>{r.length&&(a.value=r[0].target.clientHeight)}),s=p(()=>e.app||e.absolute),f=p(()=>s.value?e.location.split(" ").shift():!1),y=p(()=>s.value?e.location.split(" ")[1]??"end":!1);z(()=>e.app,()=>{const r=M({id:e.name,order:p(()=>parseInt(e.order,10)),position:f,layoutSize:p(()=>e.layout?a.value+24:0),elementSize:p(()=>a.value+24),active:p(()=>e.app&&c.value),absolute:H(e,"absolute")});w(()=>{o.value=r.layoutItemStyles.value})});const x=d();return N(()=>{const r=V.filterProps(e);return l("div",{ref:x,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${f.value}`]:s.value,[`v-fab--${y.value}`]:s.value},e.class],style:[e.app?{...o.value}:{height:"inherit",width:void 0},e.style]},[l("div",{class:"v-fab__container"},[l(te,{appear:e.appear,transition:e.transition},{default:()=>[q(l(V,A({ref:m},r,{active:void 0,location:void 0}),v),[[E,e.active]])]})])])}),{}}}),me=b("h1",null,"Photos",-1),we={__name:"Home",setup(e){const{isAuth:g}=K(),v=d(!1),c=d([]),a=d(!1),o=async()=>{const m=await G();c.value=m};return w(async()=>{v.value=!0,console.log("Home",a.value),o(),v.value=!1}),(m,s)=>(h(),j(O,null,[l(B,{class:"fill-height"},{default:u(()=>[l(k,{class:"align-center text-center fill-height"},{default:u(()=>[me,l(X,{photos:c.value,isLoading:v.value},null,8,["photos","isLoading"]),J(g)?(h(),F(ce,{key:0,extended:"","prepend-icon":"mdi-plus",text:"Add photo",variant:"tonal",color:"success",app:"",absolute:"",onClick:s[0]||(s[0]=f=>a.value=!0)})):P("",!0)]),_:1})]),_:1}),l(ne,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=f=>a.value=f),scrim:"black"},{default:u(()=>[l(ue,{onClose:s[1]||(s[1]=f=>a.value=!1)})]),_:1},8,["modelValue"])],64))}};export{we as default};
