import{a as k,C as m,o as v,c as w,w as t,b as o,g as p,t as U,d as l,Q as S,i as F}from"./index-CfxPYZDx.js";import{u as P}from"./useAuth-DGTTHVni.js";import{V as E}from"./position-BA4lyyeZ.js";import{V as L}from"./VSheet-4pYPnnPC.js";import{V as B}from"./VSnackbar-BC02pEe2.js";import{V as c}from"./VGrid-DjE6BI5c.js";import{a as D}from"./index-CLeRmTIE.js";import{V as M,a as V}from"./VTextField-CczWibhF.js";import{V as $}from"./VContainer-CemjAYpC.js";import"./forwardRefs-BYGm9vCu.js";const q={__name:"index",setup(b){const{login:f}=P(),{isLoading:s,error:x,getCurrentUser:y}=F(),_=k(),i=m(!1),n=m({username:"",password:""}),u=m(!1),d=m(!1),h=async()=>{i.value&&f(C()).then(()=>{console.log("login"),y(),_.push({name:"Home"})}).catch(e=>{d.value=!0})},g={login:[e=>e?!0:"Login is required",e=>e.length<2?"Length login error":!0],password:[e=>e?!0:"Password is required",e=>e.length<4?"Password length incorrect":!0]},C=()=>{const e=new FormData;return e.append("username",n.value.username),e.append("password",n.value.password),e};return(e,r)=>(v(),w($,{class:"fill-height"},{default:t(()=>[o(E,{class:"align-center text-center fill-height"},{default:t(()=>[o(L,{class:"fill-height pa-12",rounded:""},{default:t(()=>[o(B,{modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=a=>d.value=a),location:"right top",color:"error",transition:"slide-x-transition",eager:"",vertical:"",offset:"10000"},{actions:t(()=>[o(c,{variant:"text",onClick:r[0]||(r[0]=a=>d.value=!1)},{default:t(()=>[p(" Close ")]),_:1})]),default:t(()=>{var a;return[p(U((a=l(x))==null?void 0:a.text)+" ",1)]}),_:1},8,["modelValue"]),o(D,{flat:"",class:"mx-auto px-6 py-8","max-width":"344"},{default:t(()=>[o(M,{modelValue:i.value,"onUpdate:modelValue":r[5]||(r[5]=a=>i.value=a),onSubmit:S(h,["prevent"])},{default:t(()=>[o(V,{modelValue:n.value.username,"onUpdate:modelValue":r[2]||(r[2]=a=>n.value.username=a),modelModifiers:{trim:!0},readonly:l(s),rules:g.login,type:"email",placeholder:"Email address","prepend-inner-icon":"mdi-email-outline",class:"mb-2",clearable:!l(s),variant:"outlined",density:"compact",label:"E-mail"},null,8,["modelValue","readonly","rules","clearable"]),o(V,{modelValue:n.value.password,"onUpdate:modelValue":r[3]||(r[3]=a=>n.value.password=a),modelModifiers:{trim:!0},readonly:l(s),type:u.value?"text":"password",rules:g.password,"append-inner-icon":u.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":r[4]||(r[4]=a=>u.value=!u.value),"prepend-inner-icon":"mdi-lock-outline",class:"mb-4",clearable:!l(s),autocomplete:"on",variant:"outlined",density:"compact",label:"Password",placeholder:"Enter your password"},null,8,["modelValue","readonly","type","rules","append-inner-icon","clearable"]),o(c,{disabled:!i.value,loading:l(s),block:"",color:"success",size:"large",type:"submit"},{default:t(()=>[p(" Sign In ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"]),o(c,{variant:"text",to:{name:"ForgotPassword"},type:"link",class:"mt-4 text-subtitle-2"},{default:t(()=>[p(" Forget password ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},J={__name:"Login",setup(b){return(f,s)=>(v(),w(l(q)))}};export{J as default};
