import{aD as te,p as J,l as X,J as re,z as F,C as x,y as tt,L as ge,G as pe,E as M,H as at,n as K,a7 as lt,b as t,m as T,F as Q,T as Ce,a8 as ot,aE as nt,ab as oe,ax as rt,B as Fe,D as it,aF as st,o as _,c as S,w as o,g as R,t as O,Q as Re,f as Z,e as Y,r as me,h as z,a2 as ut,al as Ae,aj as dt,at as ct,R as mt,a4 as vt,s as qe,X as ft,O as gt,d as G,i as pt,ae as ht,q as yt,af as Vt,v as bt,a9 as xt,u as wt,a5 as _t}from"./index-BFVBqXCE.js";import{a as Pe,s as kt,b as Ct}from"./apiPhoto-BwdIC0bG.js";import{V as ze}from"./VSnackbar-QNzQSSsb.js";import{I as Pt,V as H,h as ie,a as N,k as St,g as Me,y as Et,z as Tt,b as Dt,u as Bt,e as It}from"./VGrid-N8RIq9Nk.js";import{d as Le,a as he,V as Ne,b as ve,e as Oe,f as Ut}from"./index-Bz7SeOMm.js";import{c as $t,d as Ft,e as Rt,f as Se,g as At,h as qt,i as zt,V as He,a as q}from"./VTextField-DGvHivdx.js";import{f as ye,b as je,u as Ge,V as ne}from"./forwardRefs-DabSmHtb.js";import{V as Ve}from"./VSpacer-B2VM-kzx.js";import{V as ee}from"./VSheet-B4sIrD_A.js";import{c as Mt,V as We,d as Lt,a as fe,b as W}from"./VPagination-CkYzUF7N.js";import{V as Qe}from"./VDivider-B-9TLcu9.js";import{V as se}from"./VContainer-DJ2m6-B3.js";import{V as Ee,a as Nt}from"./VRating-Cb8Iki7y.js";import{m as Ot,V as Te,a as Ht,b as De}from"./VWindowItem-HG4zv_GK.js";import{V as jt}from"./dialog-transition-DdPUuOYr.js";const be="/rating";async function Gt(e){const{data:{data:{rating:c}}}=await te.get(`${be}/${e}`);return c}async function Wt(e,c){const{data:{data:u}}=await te.post(`${be}/${e}`,{rating:c});return u}async function Be(e){const{data:{data:{rating:c}}}=await te.get(`${be}/avg/${e}`);return c}const Ze="/comments";async function Qt(e){const{data:{data:c}}=await te.get(`${Ze}/${e}`);return c}async function Zt(e){const{data:c}=await te.post(`${Ze}`,e);return c}const Jt=J({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...$t(),...Ft()},"VTextarea"),Je=X()({name:"VTextarea",directives:{Intersect:Pt},inheritAttrs:!1,props:Jt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:u,emit:f,slots:m}=c;const v=re(e,"modelValue"),{isFocused:a,focus:i,blur:y}=Rt(e),b=F(()=>typeof e.counterValue=="function"?e.counterValue(v.value):(v.value||"").toString().length),p=F(()=>{if(u.maxlength)return u.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function h(C,A){var $,L;!e.autofocus||!C||(L=($=A[0].target)==null?void 0:$.focus)==null||L.call($)}const d=x(),n=x(),g=tt(""),V=x(),l=F(()=>e.persistentPlaceholder||a.value||e.active);function r(){var C;V.value!==document.activeElement&&((C=V.value)==null||C.focus()),a.value||i()}function s(C){r(),f("click:control",C)}function w(C){f("mousedown:control",C)}function k(C){C.stopPropagation(),r(),oe(()=>{v.value="",rt(e["onClick:clear"],C)})}function U(C){var $;const A=C.target;if(v.value=A.value,($=e.modelModifiers)!=null&&$.trim){const L=[A.selectionStart,A.selectionEnd];oe(()=>{A.selectionStart=L[0],A.selectionEnd=L[1]})}}const P=x(),D=x(+e.rows),B=F(()=>["plain","underlined"].includes(e.variant));ge(()=>{e.autoGrow||(D.value=+e.rows)});function E(){e.autoGrow&&oe(()=>{if(!P.value||!n.value)return;const C=getComputedStyle(P.value),A=getComputedStyle(n.value.$el),$=parseFloat(C.getPropertyValue("--v-field-padding-top"))+parseFloat(C.getPropertyValue("--v-input-padding-top"))+parseFloat(C.getPropertyValue("--v-field-padding-bottom")),L=P.value.scrollHeight,ae=parseFloat(C.lineHeight),de=Math.max(parseFloat(e.rows)*ae+$,parseFloat(A.getPropertyValue("--v-input-control-height"))),ce=parseFloat(e.maxRows)*ae+$||1/0,j=it(L??0,de,ce);D.value=Math.floor((j-$)/ae),g.value=Fe(j)})}pe(E),M(v,E),M(()=>e.rows,E),M(()=>e.maxRows,E),M(()=>e.density,E);let I;return M(P,C=>{C?(I=new ResizeObserver(E),I.observe(P.value)):I==null||I.disconnect()}),at(()=>{I==null||I.disconnect()}),K(()=>{const C=!!(m.counter||e.counter||e.counterValue),A=!!(C||m.details),[$,L]=lt(u),{modelValue:ae,...de}=Se.filterProps(e),ce=At(e);return t(Se,T({ref:d,modelValue:v.value,"onUpdate:modelValue":j=>v.value=j,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":B.value},e.class],style:e.style},$,de,{centerAffix:D.value===1&&!B.value,focused:a.value}),{...m,default:j=>{let{id:le,isDisabled:xe,isDirty:we,isReadonly:Xe,isValid:Ke}=j;return t(qt,T({ref:n,style:{"--v-textarea-control-height":g.value},onClick:s,onMousedown:w,"onClick:clear":k,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ce,{id:le.value,active:l.value||we.value,centerAffix:D.value===1&&!B.value,dirty:we.value||e.dirty,disabled:xe.value,focused:a.value,error:Ke.value===!1}),{...m,default:Ye=>{let{props:{class:_e,...ke}}=Ye;return t(Q,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),Ce(t("textarea",T({ref:V,class:_e,value:v.value,onInput:U,autofocus:e.autofocus,readonly:Xe.value,disabled:xe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:r,onBlur:y},ke,L),null),[[ot("intersect"),{handler:h},null,{once:!0}]]),e.autoGrow&&Ce(t("textarea",{class:[_e,"v-textarea__sizer"],id:`${ke.id}-sizer`,"onUpdate:modelValue":et=>v.value=et,ref:P,readonly:!0,"aria-hidden":"true"},null),[[nt,v.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:A?j=>{var le;return t(Q,null,[(le=m.details)==null?void 0:le.call(m,j),C&&t(Q,null,[t("span",null,null),t(zt,{active:e.persistentCounter||a.value,value:b.value,max:p.value,disabled:e.disabled},m.counter)])])}:void 0})}),ye({},d,n,V)}}),Xt={class:"d-flex"},Kt={__name:"CommentForm",props:{title:String,photo_id:{type:Number,required:!0}},emits:["sendComment"],setup(e,{emit:c}){const u=e,f=c,m=x(!1),v=x(!1),a=x(!1),i=x(null),y=x({comment:""}),{photo_id:b}=st(u),p=async d=>{m.value&&(v.value=!0,Zt({comment:y.value.comment,photo_id:b.value}).then(n=>{d.target.reset(),f("sendComment")}).catch(n=>{var g,V,l,r;a.value=!0,i.value={type:"error",title:"Error",text:((V=(g=n==null?void 0:n.response)==null?void 0:g.data)==null?void 0:V.message)||((r=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:r.detail)||n.message}}).finally(()=>{v.value=!1}))},h={comment:[d=>!!d||"Comment is required"]};return(d,n)=>(_(),S(ee,{class:"align-center"},{default:o(()=>[t(ze,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=g=>a.value=g),location:"right top",color:"error",transition:"slide-x-transition",eager:"",vertical:"",offset:"10000"},{actions:o(()=>[t(H,{variant:"text",onClick:n[0]||(n[0]=g=>a.value=!1)},{default:o(()=>[R(" Close ")]),_:1})]),default:o(()=>{var g;return[R(O((g=i.value)==null?void 0:g.text)+" ",1)]}),_:1},8,["modelValue"]),t(Le,{class:"text-left"},{default:o(()=>[R(O(e.title),1)]),_:1}),t(He,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=g=>m.value=g),variant:"outlined",onSubmit:Re(p,["prevent"])},{default:o(()=>[t(Je,{modelValue:y.value.comment,"onUpdate:modelValue":n[2]||(n[2]=g=>y.value.comment=g),modelModifiers:{trim:!0},label:"Comment",variant:"outlined",placeholder:"Enter comment",disabled:v.value,rules:h.comment,rows:"2"},null,8,["modelValue","disabled","rules"]),Z("div",Xt,[t(Ve),t(H,{disabled:!m.value,loading:v.value,color:"success",size:"large",type:"submit","prepend-icon":"mdi-send"},{default:o(()=>[R("Send ")]),_:1},8,["disabled","loading"])])]),_:1},8,["modelValue"])]),_:1}))}},Yt=Z("h1",null,"Comments",-1),ea={class:"ms-4"},ta={key:2},aa={__name:"CommentsSet",props:{photo_id:{type:Number,required:!0}},setup(e){const c=e,u=x([]),f=x(!1),m=async()=>{f.value=!0,Qt(c.photo_id).then(y=>{u.value=y}).catch(y=>{u.value=[]}).finally(()=>{f.value=!1})};ge(async()=>{m()});const v=F(()=>y=>{const b=y.split(".")[0].split("T");return b[0]+" "+b[1]}),a=F(()=>y=>y.length<80?1:Math.floor(y.length/80)),i=async()=>{m()};return(y,b)=>{const p=Kt;return _(),S(se,{class:"fill-height"},{default:o(()=>[t(ie,{class:"align-center text-center fill-height"},{default:o(()=>[Yt,f.value?(_(),S(St,{key:1,indeterminate:"",size:88,width:9})):(_(),S(Mt,{key:0,items:u.value,"items-per-page":5},{default:o(({items:h})=>[(_(!0),Y(Q,null,me(h,d=>(_(),S(he,{key:d.id,variant:"outlined",class:"my-2",style:{"border-color":"green"}},{prepend:o(()=>[t(Ne,{size:"32"},{default:o(()=>[d.raw.user.avatar?(_(),S(N,{key:0,src:d.raw.user.avatar,alt:d.raw.user.username},null,8,["src","alt"])):z("",!0)]),_:2},1024),Z("span",ea,O(d.raw.user.username),1)]),append:o(()=>[t(We,{color:"green"},{default:o(()=>[R(O(v.value(d.raw.created_at)),1)]),_:2},1024)]),default:o(()=>[t(ve,null,{default:o(()=>[t(Je,{modelValue:d.raw.comment,"onUpdate:modelValue":n=>d.raw.comment=n,variant:"outlined",rows:a.value(d.raw.comment),disabled:"","no-resize":""},null,8,["modelValue","onUpdate:modelValue","rows"])]),_:2},1024)]),_:2},1024))),128))]),footer:o(({pageCount:h,prevPage:d,nextPage:n,setPage:g})=>{var V;return[(V=u.value)!=null&&V.length&&h>1?(_(),S(Lt,{key:0,length:h,"total-visible":5,rounded:"circle","onUpdate:modelValue":g,onPrev:d,onNext:n},null,8,["length","onUpdate:modelValue","onPrev","onNext"])):z("",!0)]}),_:1},8,["items"])),f.value?z("",!0):(_(),Y("div",ta,[t(Qe,{class:"my-4"}),t(p,{title:"Add comment",photo_id:e.photo_id,onSendComment:i},null,8,["photo_id"])]))]),_:1})]),_:1})}}},la=Z("h1",null,"Transform",-1),oa=Z("div",{class:"d-flex align-center justify-center fill-height"},null,-1),na={__name:"PhotoTransformForm",props:{photo_id:Number},emits:["close","addTransformation"],setup(e,{emit:c}){const u=c,f=e,m=x(""),v=x(!1),a=x({radius:"20:80",angle:-20,aspect_ratio:"1.5",crop:"fill",background:"red",width:200,height:200,border:"5px_solid_red",gravity:"north",opacity:30,quality:"80",zoom:"1.2"}),i=x(!1),y=x(!1),b=x(!0),p=x(!1),h=x({}),d={radius:[l=>!!l||"Radius is required"],angle:[l=>!!l||"Angle is required"],aspect_ratio:[l=>!!l||"Aspect ratio is required"],crop:[l=>!!l||"Crop is required"],background:[l=>!!l||"Background is required"],width:[l=>!!l||"Width is required"],height:[l=>!!l||"Height is required"],border:[l=>!!l||"Border is required"],gravity:[l=>!!l||"Gravity is required"],opacity:[l=>!!l||"Opacity is required"],quality:[l=>!!l||"Quality is required"],zoom:[l=>!!l||"Zoom is required"]},n=async()=>{y.value=!0,Pe(f.photo_id,V()).then(l=>{m.value=l}).catch(l=>{var r,s,w,k;p.value=!0,h.value={type:"error",title:"Error",text:((s=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:s.message)||((k=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:k.detail)||l.message}}).finally(()=>{y.value=!1})},g=()=>{i.value=!0,b.value||Pe(f.photo_id,V()).then(l=>{console.log("onPreview",l),m.value=l}).catch(l=>{var r,s,w,k;p.value=!0,h.value={type:"error",title:"Error",text:((s=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:s.message)||((k=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:k.detail)||l.message}}),kt(f.photo_id,m.value).then(l=>{i.value=!1,u("addTransformation")}).catch(l=>{var r,s,w,k;console.log(l),p.value=!0,h.value={type:"error",title:"Error",text:((s=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:s.message)||((k=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:k.detail)||l.message}}).finally(()=>{i.value=!1})},V=()=>Object.entries(a.value).reduce((l,[r,s])=>(s&&(l[r]=s),l),{});return(l,r)=>(_(),S(se,null,{default:o(()=>[t(ie,{class:"align-center text-center fill-height"},{default:o(()=>[t(ee,{class:"align-center rounded",width:"100%"},{default:o(()=>[t(ze,{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=s=>p.value=s),location:"right top",color:"error",transition:"slide-x-transition",eager:"",vertical:"",offset:"10000"},{actions:o(()=>[t(H,{variant:"text",onClick:r[0]||(r[0]=s=>p.value=!1)},{default:o(()=>[R(" Close ")]),_:1})]),default:o(()=>{var s;return[R(O((s=h.value)==null?void 0:s.text)+" ",1)]}),_:1},8,["modelValue"]),t(H,{icon:"mdi-close",onClick:r[2]||(r[2]=s=>l.$emit("close")),position:"absolute top-0 right-0",variant:"text"}),la,t(he,{class:"pa-4"},{default:o(()=>[t(fe,null,{default:o(()=>[t(W,{cols:"auto"},{default:o(()=>[b.value?(_(),S(N,{key:0,src:m.value,width:"300px",height:"150px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},{placeholder:o(()=>[oa]),_:1},8,["src"])):z("",!0)]),_:1}),t(W,{cols:"auto"},{default:o(()=>[t(He,{modelValue:v.value,"onUpdate:modelValue":r[14]||(r[14]=s=>v.value=s),onSubmit:Re(g,["prevent"])},{default:o(()=>[t(fe,null,{default:o(()=>[t(W,{cols:"4"},{default:o(()=>[t(q,{modelValue:a.value.crop,"onUpdate:modelValue":r[3]||(r[3]=s=>a.value.crop=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.crop,placeholder:"Enter crop",class:"mb-2",variant:"outlined",density:"compact",label:"Crop"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.radius,"onUpdate:modelValue":r[4]||(r[4]=s=>a.value.radius=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.radius,placeholder:"Enter radius",class:"mb-2",variant:"outlined",density:"compact",label:"Radius"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.angle,"onUpdate:modelValue":r[5]||(r[5]=s=>a.value.angle=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.angle,placeholder:"Enter angle",class:"mb-2",variant:"outlined",density:"compact",label:"Angle"},null,8,["modelValue","readonly","clearable","rules"])]),_:1}),t(W,{cols:"4"},{default:o(()=>[t(q,{modelValue:a.value.background,"onUpdate:modelValue":r[6]||(r[6]=s=>a.value.background=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.background,placeholder:"Enter background",class:"mb-2",variant:"outlined",density:"compact",label:"Background"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.width,"onUpdate:modelValue":r[7]||(r[7]=s=>a.value.width=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.width,placeholder:"Enter width",class:"mb-2",variant:"outlined",density:"compact",label:"Width"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.height,"onUpdate:modelValue":r[8]||(r[8]=s=>a.value.height=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.height,placeholder:"Enter height",class:"mb-2",variant:"outlined",density:"compact",label:"Height"},null,8,["modelValue","readonly","clearable","rules"])]),_:1}),t(W,{cols:"5"},{default:o(()=>[t(q,{modelValue:a.value.quality,"onUpdate:modelValue":r[9]||(r[9]=s=>a.value.quality=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.quality,placeholder:"Enter quality",class:"mb-2",variant:"outlined",density:"compact",label:"Quality"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.opacity,"onUpdate:modelValue":r[10]||(r[10]=s=>a.value.opacity=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.opacity,placeholder:"Enter opacity",class:"mb-2",variant:"outlined",density:"compact",label:"Opacity"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.zoom,"onUpdate:modelValue":r[11]||(r[11]=s=>a.value.zoom=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.zoom,placeholder:"Enter zoom",class:"mb-2",variant:"outlined",density:"compact",label:"Zoom"},null,8,["modelValue","readonly","clearable","rules"])]),_:1}),t(W,{cols:"6"},{default:o(()=>[t(q,{modelValue:a.value.border,"onUpdate:modelValue":r[12]||(r[12]=s=>a.value.border=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.border,placeholder:"Enter border",class:"mb-2",variant:"outlined",density:"compact",label:"Border"},null,8,["modelValue","readonly","clearable","rules"]),t(q,{modelValue:a.value.gravity,"onUpdate:modelValue":r[13]||(r[13]=s=>a.value.gravity=s),modelModifiers:{trim:!0},readonly:i.value,clearable:!i.value,rules:d.gravity,placeholder:"Enter gravity",class:"mb-2",variant:"outlined",density:"compact",label:"Gravity"},null,8,["modelValue","readonly","clearable","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(Oe,{class:"justify-center"},{default:o(()=>[b.value?(_(),S(H,{key:0,type:"button",disabled:!v.value,loading:y.value,color:"success",size:"large","prepend-icon":"mdi-eye",onClick:n},{default:o(()=>[R(" Preview ")]),_:1},8,["disabled","loading"])):z("",!0),t(Ve),t(H,{type:"submit",disabled:!v.value,loading:i.value,color:"success",size:"large","prepend-icon":"mdi-upload",onClick:g},{default:o(()=>[R(" Upload ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ra=J({color:String,cycle:Boolean,delimiterIcon:{type:ut,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Ot({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),ia=X()({name:"VCarousel",props:ra(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:u}=c;const f=re(e,"modelValue"),{t:m}=Ae(),v=x();let a=-1;M(f,y),M(()=>e.interval,y),M(()=>e.cycle,b=>{b?y():window.clearTimeout(a)}),pe(i);function i(){!e.cycle||!v.value||(a=window.setTimeout(v.value.group.next,+e.interval>0?+e.interval:6e3))}function y(){window.clearTimeout(a),window.requestAnimationFrame(i)}return K(()=>{const b=Te.filterProps(e);return t(Te,T({ref:v},b,{modelValue:f.value,"onUpdate:modelValue":p=>f.value=p,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Fe(e.height)},e.style]}),{default:u.default,additional:p=>{let{group:h}=p;return t(Q,null,[!e.hideDelimiters&&t("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[h.items.value.length>0&&t(Me,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[h.items.value.map((d,n)=>{const g={id:`carousel-item-${d.id}`,"aria-label":m("$vuetify.carousel.ariaLabel.delimiter",n+1,h.items.value.length),class:["v-carousel__controls__item",h.isSelected(d.id)&&"v-btn--active"],onClick:()=>h.select(d.id,!0)};return u.item?u.item({props:g,item:d}):t(H,T(d,g),null)})]})]),e.progress&&t(Et,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(h.getItemIndex(f.value)+1)/h.items.value.length*100},null)])},prev:u.prev,next:u.next})}),{}}}),sa=J({...Tt(),...Ht()},"VCarouselItem"),ua=X()({name:"VCarouselItem",inheritAttrs:!1,props:sa(),setup(e,c){let{slots:u,attrs:f}=c;K(()=>{const m=N.filterProps(e),v=De.filterProps(e);return t(De,T({class:["v-carousel-item",e.class]},v),{default:()=>[t(N,T(f,m),u)]})})}}),da=J({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...je({origin:"center center",scrollStrategy:"block",transition:{component:jt},zIndex:2400})},"VDialog"),Ie=X()({name:"VDialog",props:da(),emits:{"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,c){let{emit:u,slots:f}=c;const m=re(e,"modelValue"),{scopeId:v}=Ge(),a=x();function i(p){var n,g;const h=p.relatedTarget,d=p.target;if(h!==d&&((n=a.value)!=null&&n.contentEl)&&((g=a.value)!=null&&g.globalTop)&&![document,a.value.contentEl].includes(d)&&!a.value.contentEl.contains(d)){const V=ct(a.value.contentEl);if(!V.length)return;const l=V[0],r=V[V.length-1];h===l?r.focus():l.focus()}}dt&&M(()=>m.value&&e.retainFocus,p=>{p?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function y(){var p;(p=a.value)!=null&&p.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function b(){u("afterLeave")}return M(m,async p=>{var h;p||(await oe(),(h=a.value.activatorEl)==null||h.focus({preventScroll:!0}))}),K(()=>{const p=ne.filterProps(e),h=T({"aria-haspopup":"dialog","aria-expanded":String(m.value)},e.activatorProps),d=T({tabindex:-1},e.contentProps);return t(ne,T({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},p,{modelValue:m.value,"onUpdate:modelValue":n=>m.value=n,"aria-modal":"true",activatorProps:h,contentProps:d,role:"dialog",onAfterEnter:y,onAfterLeave:b},v),{activator:f.activator,default:function(){for(var n=arguments.length,g=new Array(n),V=0;V<n;V++)g[V]=arguments[V];return t(Me,{root:"VDialog"},{default:()=>{var l;return[(l=f.default)==null?void 0:l.call(f,...g)]}})}})}),ye({},a)}}),ca=J({id:String,text:String,...mt(je({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),ma=X()({name:"VTooltip",props:ca(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:u}=c;const f=re(e,"modelValue"),{scopeId:m}=Ge(),v=vt(),a=F(()=>e.id||`v-tooltip-${v}`),i=x(),y=F(()=>e.location.split(" ").length>1?e.location:e.location+" center"),b=F(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=F(()=>e.transition?e.transition:f.value?"scale-transition":"fade-transition"),h=F(()=>T({"aria-describedby":a.value},e.activatorProps));return K(()=>{const d=ne.filterProps(e);return t(ne,T({ref:i,class:["v-tooltip",e.class],style:e.style,id:a.value},d,{modelValue:f.value,"onUpdate:modelValue":n=>f.value=n,transition:p.value,absolute:!0,location:y.value,origin:b.value,persistent:!0,role:"tooltip",activatorProps:h.value,_disableGlobalStack:!0},m),{activator:u.activator,default:function(){var l;for(var n=arguments.length,g=new Array(n),V=0;V<n;V++)g[V]=arguments[V];return((l=u.default)==null?void 0:l.call(u,...g))??e.text}})}),ye({},i)}}),va={key:1,class:"mt-1"},fa={class:"px-4 mb-2"},ga=Z("h3",{class:"text-center"},"Transformations",-1),pa={__name:"PhotoDetail",props:{photo:{type:Object,required:!0}},emits:["updateData"],setup(e,{emit:c}){const{isAuth:u,user:f}=pt(),m=e,v=c,a=qe(m,"photo"),i=ft("transformations"),y=x(0),b=x(0),p=x(!1);pe(async()=>{u.value&&Gt(a.value.id).then(n=>{y.value=n}).catch(n=>{console.log(n)}),Be(a.value.id).then(n=>{b.value=n}).catch(n=>{console.log(n)})});const h=async n=>{Wt(a.value.id,n).then(g=>{Be(a.value.id).then(V=>{b.value=V})}).catch(g=>{console.log(g)})},d=()=>{console.log("handleUpdateData"),v("updateData")};return(n,g)=>{const V=gt("v-carousel-controls");return p.value?z("",!0):(_(),S(ee,{key:0,class:"align-center"},{default:o(()=>{var l,r;return[t(he,{title:(l=a.value)==null?void 0:l.title},{append:o(()=>[t(ma,{location:"bottom"},{activator:o(({props:s})=>[t(Ne,T({size:"64"},s),{default:o(()=>{var w,k,U,P,D,B,E,I;return[(k=(w=a.value)==null?void 0:w.owner)!=null&&k.avatar?(_(),S(N,{key:0,alt:(P=(U=a.value)==null?void 0:U.owner)==null?void 0:P.username,src:(B=(D=a.value)==null?void 0:D.owner)==null?void 0:B.avatar},null,8,["alt","src"])):(_(),Y("span",va,O((I=(E=a.value)==null?void 0:E.owner)==null?void 0:I.username),1))]}),_:2},1040)]),default:o(()=>[t(Le,null,{default:o(()=>{var s,w;return[R(O((w=(s=a.value)==null?void 0:s.owner)==null?void 0:w.username),1)]}),_:1})]),_:1})]),prepend:o(()=>[t(Ee,{"model-value":b.value,color:"amber",density:"compact","half-increments":"",readonly:""},null,8,["model-value"])]),default:o(()=>{var s;return[(s=a.value)!=null&&s.tags?(_(),S(ve,{key:0},{default:o(()=>{var w;return[Z("div",fa,[(_(!0),Y(Q,null,me((w=a.value)==null?void 0:w.tags,k=>(_(),S(We,{key:k.id,class:"mr-2"},{default:o(()=>[R(O(k.name),1)]),_:2},1024))),128))])]}),_:1})):z("",!0),t(Ut,null,{default:o(()=>[t(fe,{class:"justify-center"},{default:o(()=>{var w;return[t(W,{cols:"7",class:"d-flex"},{default:o(()=>{var k,U;return[t(N,{src:(k=a.value)==null?void 0:k.secure_url,alt:(U=a.value)==null?void 0:U.title,width:"300px",height:"300px",class:"mx-auto my-4","lazy-src":"https://picsum.photos/id/11/10/6"},null,8,["src","alt"])]}),_:1}),(w=G(i))!=null&&w.length?(_(),S(W,{key:0,cols:"5",class:"d-flex"},{default:o(()=>[t(Qe,{vertical:"",class:"mx-4"}),t(ee,{class:"d-flex flex-column",width:"100%"},{default:o(()=>{var k,U;return[t(Nt,{color:"green",content:G(i).length,class:"d-flex justify-center align-center my-6 mt-4",inline:""},{default:o(()=>[ga]),_:1},8,["content"]),(k=G(i))!=null&&k.length?(_(),S(ia,{key:0,"show-arrows":((U=G(i))==null?void 0:U.length)>1,height:"300px","hide-delimiter-background":"","hide-delimiters":""},{default:o(()=>[(_(!0),Y(Q,null,me(G(i),P=>(_(),S(ua,{key:P.id,class:"align-center text-center fill-height cursor-pointer",height:"150px",position:"relative"},{default:o(()=>[t(Ie,null,{activator:o(({props:D})=>{var B;return[t(N,T({src:P.secure_url,alt:P.title,ref_for:!0},D,{pointer:"true"}),null,16,["src","alt"]),t(N,T({ref_for:!0},D,{src:(B=P==null?void 0:P.qr_code)==null?void 0:B.secure_url,alt:P.title,width:"64",height:"64",class:"position-absolute top-0 right-0 fill=white"}),null,16,["src","alt"])]}),default:o(({isActive:D})=>[t(se,{class:"fill-height"},{default:o(()=>[t(ie,{class:"align-center text-end"},{default:o(()=>[t(ee,{class:"mx-auto","max-width":"500px"},{default:o(()=>{var B;return[t(N,{src:(B=P==null?void 0:P.qr_code)==null?void 0:B.secure_url,alt:P.title,style:{"background-color":"white"}},null,8,["src","alt"]),t(H,{variant:"outlined",color:"green",text:"Close",class:"mx-4 my-6",onClick:E=>D.value=!1},null,8,["onClick"])]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,{class:"d-flex justify-center"})]),_:1},8,["show-arrows"])):z("",!0)]}),_:1})]),_:1})):z("",!0)]}),_:1}),t(ve,null,{default:o(()=>{var w;return[R(O((w=a.value)==null?void 0:w.description),1)]}),_:1})]),_:1}),t(Oe,null,{default:o(()=>{var w,k,U,P,D,B;return[((w=G(f))==null?void 0:w.email)===((U=(k=a.value)==null?void 0:k.owner)==null?void 0:U.email)?(_(),S(Ie,{key:0},{activator:o(({props:E})=>[t(H,T(E,{variant:"outlined",color:"green",text:"Make transformation"}),null,16)]),default:o(({isActive:E})=>{var I;return[t(na,{photo_id:(I=a.value)==null?void 0:I.id,onClose:C=>E.value=!1,onAddTransformation:C=>{E.value=!1,d()}},null,8,["photo_id","onClose","onAddTransformation"])]}),_:1})):z("",!0),t(Ve),G(u)&&((D=(P=a.value)==null?void 0:P.owner)==null?void 0:D.email)!==((B=G(f))==null?void 0:B.email)?(_(),S(Ee,{key:1,modelValue:y.value,"onUpdate:modelValue":[g[0]||(g[0]=E=>y.value=E),h],color:"amber",density:"compact"},null,8,["modelValue"])):z("",!0)]}),_:1})]}),_:1},8,["title"]),t(aa,{photo_id:(r=a.value)==null?void 0:r.id},null,8,["photo_id"])]}),_:1}))}}},ha={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ya(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[c])}function Ue(e){const[c,u]=e.split("@");return Array.from({length:u}).map(()=>ue(c))}function ue(e){let c=[];if(!e)return c;const u=ha[e];if(e!==u){if(e.includes(","))return $e(e);if(e.includes("@"))return Ue(e);u.includes(",")?c=$e(u):u.includes("@")?c=Ue(u):u&&c.push(ue(u))}return[ya(e,c)]}function $e(e){return e.replace(/\s/g,"").split(",").map(ue)}const Va=J({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...ht(),...Dt(),...yt()},"VSkeletonLoader"),ba=X()({name:"VSkeletonLoader",props:Va(),setup(e,c){let{slots:u}=c;const{backgroundColorClasses:f,backgroundColorStyles:m}=Bt(qe(e,"color")),{dimensionStyles:v}=Vt(e),{elevationClasses:a}=It(e),{themeClasses:i}=bt(e),{t:y}=Ae(),b=F(()=>ue(xt(e.type).join(",")));return K(()=>{var h;const p=!u.default||e.loading;return t("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},i.value,f.value,a.value],style:[m.value,p?v.value:{}],"aria-busy":e.boilerplate?void 0:p,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:y(e.loadingText),role:e.boilerplate?void 0:"alert"},[p?b.value:(h=u.default)==null?void 0:h.call(u)])}),{}}}),Ra={__name:"PhotoDetail",setup(e){const u=wt().params.photo_id,f=x(!1),m=x(null),v=x([]);_t("transformations",v);const a=async y=>{f.value=!0,Ct(y).then(b=>{m.value=b,v.value=b.transformations}).catch(b=>{console.log(b)}).finally(()=>{f.value=!1})},i=()=>{a(u)};return ge(async()=>{a(u)}),(y,b)=>(_(),S(se,{class:"fill-height"},{default:o(()=>[t(ie,{class:"align-center text-center fill-height"},{default:o(()=>[f.value?(_(),S(ba,{key:1,class:"mx-auto border","max-height":"auto",type:"card, avatar, article, actions"})):(_(),S(pa,{key:0,photo:m.value,onUpdateData:i},null,8,["photo"]))]),_:1})]),_:1}))}};export{Ra as default};
