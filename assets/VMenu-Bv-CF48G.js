import{e as E,h as L,s as V,i as B,j as I,n as K,a as j,b as q,k as C,V as k,f as R}from"./forwardRefs-CmMfuqbl.js";import{l as O,b as x,m as P,at as T,p as F,R as U,J as Y,ab as H,z as A,C as N,_ as X,y as z,Y as J,au as W,E as G,n as Q,$ as Z,av as D,aw as _,aj as M}from"./index-DpOoD5N3.js";import{b as ee}from"./VGrid-DqjEqCRg.js";const te=F({target:[Object,Array]},"v-dialog-transition"),ne=O()({name:"VDialogTransition",props:te(),setup(o,m){let{slots:n}=m;const i={onBeforeEnter(a){a.style.pointerEvents="none",a.style.visibility="hidden"},async onEnter(a,g){var v;await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),a.style.visibility="";const{x:u,y:s,sx:t,sy:f,speed:d}=$(o.target,a),p=E(a,[{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0},{}],{duration:225*d,easing:L});(v=S(a))==null||v.forEach(l=>{E(l,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*d,easing:V})}),p.finished.then(()=>g())},onAfterEnter(a){a.style.removeProperty("pointer-events")},onBeforeLeave(a){a.style.pointerEvents="none"},async onLeave(a,g){var v;await new Promise(l=>requestAnimationFrame(l));const{x:u,y:s,sx:t,sy:f,speed:d}=$(o.target,a);E(a,[{},{transform:`translate(${u}px, ${s}px) scale(${t}, ${f})`,opacity:0}],{duration:125*d,easing:B}).finished.then(()=>g()),(v=S(a))==null||v.forEach(l=>{E(l,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:V})})},onAfterLeave(a){a.style.removeProperty("pointer-events")}};return()=>o.target?x(T,P({name:"dialog-transition"},i,{css:!1}),n):x(T,{name:"dialog-transition"},n)}});function S(o){var n;const m=(n=o.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return m&&[...m]}function $(o,m){const n=I(o),i=K(m),[a,g]=getComputedStyle(m).transformOrigin.split(" ").map(c=>parseFloat(c)),[u,s]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let t=n.left+n.width/2;u==="left"||s==="left"?t-=n.width/2:(u==="right"||s==="right")&&(t+=n.width/2);let f=n.top+n.height/2;u==="top"||s==="top"?f-=n.height/2:(u==="bottom"||s==="bottom")&&(f+=n.height/2);const d=n.width/i.width,p=n.height/i.height,v=Math.max(1,d,p),l=d/v||0,b=p/v||0,e=i.width*i.height/(window.innerWidth*window.innerHeight),r=e>.12?Math.min(1.5,(e-.12)*10+1):1;return{x:t-(a+i.left),y:f-(g+i.top),sx:l,sy:b,speed:r}}const ae=F({id:String,...U(j({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ne}}),["absolute"])},"VMenu"),le=O()({name:"VMenu",props:ae(),emits:{"update:modelValue":o=>!0},setup(o,m){let{slots:n}=m;const i=Y(o,"modelValue"),{scopeId:a}=q(),g=H(),u=A(()=>o.id||`v-menu-${g}`),s=N(),t=X(C,null),f=z(0);J(C,{register(){++f.value},unregister(){--f.value},closeParents(e){setTimeout(()=>{!f.value&&!o.persistent&&(e==null||e&&!W(e,s.value.contentEl))&&(i.value=!1,t==null||t.closeParents())},40)}});async function d(e){var y,h,w;const r=e.relatedTarget,c=e.target;await Z(),i.value&&r!==c&&((y=s.value)!=null&&y.contentEl)&&((h=s.value)!=null&&h.globalTop)&&![document,s.value.contentEl].includes(c)&&!s.value.contentEl.contains(c)&&((w=D(s.value.contentEl)[0])==null||w.focus())}G(i,e=>{e?(t==null||t.register(),document.addEventListener("focusin",d,{once:!0})):(t==null||t.unregister(),document.removeEventListener("focusin",d))});function p(e){t==null||t.closeParents(e)}function v(e){var r,c,y;if(!o.disabled)if(e.key==="Tab"||e.key==="Enter"&&!o.closeOnContentClick){if(e.key==="Enter"&&e.target instanceof HTMLTextAreaElement)return;e.key==="Enter"&&e.preventDefault(),_(D((r=s.value)==null?void 0:r.contentEl,!1),e.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(i.value=!1,(y=(c=s.value)==null?void 0:c.activatorEl)==null||y.focus())}else["Enter"," "].includes(e.key)&&o.closeOnContentClick&&(i.value=!1,t==null||t.closeParents())}function l(e){var c;if(o.disabled)return;const r=(c=s.value)==null?void 0:c.contentEl;r&&i.value?e.key==="ArrowDown"?(e.preventDefault(),M(r,"next")):e.key==="ArrowUp"&&(e.preventDefault(),M(r,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(i.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>l(e))))}const b=A(()=>P({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":u.value,onKeydown:l},o.activatorProps));return Q(()=>{const e=k.filterProps(o);return x(k,P({ref:s,id:u.value,class:["v-menu",o.class],style:o.style},e,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,absolute:!0,activatorProps:b.value,"onClick:outside":p,onKeydown:v},a),{activator:n.activator,default:function(){for(var r=arguments.length,c=new Array(r),y=0;y<r;y++)c[y]=arguments[y];return x(ee,{root:"VMenu"},{default:()=>{var h;return[(h=n.default)==null?void 0:h.call(n,...c)]}})}})}),R({id:u,Î¨openChildren:f},s)}});export{le as V,ne as a};
